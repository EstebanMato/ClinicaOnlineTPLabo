<div class="overlay" *ngIf="isLoading">
    <div class="spinner"></div>
</div>
<div class="turnos-container">
    <form [formGroup]="filtroForm">
        <div class="filtro-container">

            <label for="especialista">Especialista:</label>
            <input type="text" formControlName="especialista">

            <label for="especialidad">Especialidad:</label>
            <input type="text" formControlName="especialidad">

            <button class="btn-danger btn-sm btn-nuevo-turno" routerLink="turno/">Nuevo Turno</button>
        </div>

        <table class="table align-middle mb-0 bg-white">
            <thead class="bg-light">
                <tr>
                    <th>Especialista</th>
                    <th>Fecha</th>
                    <th>Hora</th>
                    <th>Especialidad</th>
                    <th>Estado</th>
                    <th>Accion</th>
                    <th>Comentarios</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let turno of turnosFiltrado">
                    <td>
                        <p class="fw-normal mb-1">{{turno.nombreEspecialista}}</p>
                    </td>
                    <td>
                        {{turno.fecha}}
                    </td>
                    <td>
                        {{turno.horaInicio}}
                    </td>
                    <td>
                        {{turno.especialidad}}
                    </td>
                    <td>
                        <span [ngClass]="getColorPorEstado(turno.estado)">
                            {{turno.estado}}
                        </span>
                    </td>
                    <td>
                        <button *ngIf="turno.estado === 'pendiente' || turno.estado === 'confirmado'" type="button"
                            class="btn btn-outline-danger btn-sm" (click)="cancelarTurno(turno)">Cancelar
                        </button>
                        <button *ngIf="turno.estado === 'finalizado' && turno.calificacion === '' " type="button"
                            class="btn btn-outline-warning btn-sm" (click)="calificarTurno(turno)">Calificar
                        </button>
                    </td>
                    <td>
                        <span
                            *ngIf="(turno.comentarios !== '' && turno.comentarios!== undefined) || (turno.resenia !== '' && turno.resenia !== undefined)"
                            class="d-flex justify-content-center">
                            <i class="fas fa-eye text-muted" (click)="verComentariosTurno(turno)"></i>
                        </span>
                    </td>
                </tr>
                <tr>
            </tbody>
        </table>
    </form>
</div>