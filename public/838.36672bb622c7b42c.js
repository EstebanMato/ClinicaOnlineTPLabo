"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[838],{6838:(J,b,a)=>{a.r(b),a.d(b,{TurnoMostrarModule:()=>E});var l=a(6814),u=a(9517),x=a(5861),T=a(2572),Z=a(7398),v=a(3519),c=a.n(v),C=a(8304),t=a(5879),A=a(9113),M=a(588),s=a(6223),F=a(5161),y=a(5258);function P(e,d){1&e&&(t.TgZ(0,"div",13),t._UZ(1,"div",14),t.qZA())}function $(e,d){if(1&e){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.cancelarTurno(i))}),t._uU(1,"Cancelar "),t.qZA()}}function O(e,d){if(1&e){const n=t.EpF();t.TgZ(0,"span")(1,"i",20),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.verComentariosTurno(i))}),t.qZA()()}}function U(e,d){if(1&e&&(t.TgZ(0,"tr")(1,"td")(2,"p",15),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"p",15),t._uU(6),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"primeraMayuscula"),t.qZA(),t.TgZ(14,"td")(15,"span",16),t.ALo(16,"colorPorEstado"),t._uU(17),t.ALo(18,"primeraMayuscula"),t.qZA()(),t.TgZ(19,"td"),t.YNc(20,$,2,0,"button",17),t.qZA(),t.TgZ(21,"td"),t.YNc(22,O,2,0,"span",18),t.qZA()()),2&e){const n=d.$implicit;t.xp6(3),t.Oqu(n.nombreEspecialista),t.xp6(3),t.Oqu(n.nombrePaciente),t.xp6(2),t.hij(" ",n.fecha," "),t.xp6(2),t.hij(" ",n.horaInicio," "),t.xp6(2),t.hij(" ",t.lcZ(13,9,n.especialidad.nombre)," "),t.xp6(3),t.Q6J("ngClass",t.lcZ(16,11,n.estado)),t.xp6(2),t.hij(" ",t.lcZ(18,13,n.estado)," "),t.xp6(3),t.Q6J("ngIf","pendiente"===n.estado),t.xp6(2),t.Q6J("ngIf",""!==n.comentarios&&void 0!==n.comentarios||""!==n.resenia&&void 0!==n.resenia)}}const j=[{path:"",component:(()=>{class e{constructor(n,o,i){this.turnoService=n,this.dataquery=o,this.formBuilder=i,this.isLoading=!1}ngOnInit(){this.filtroForm=this.formBuilder.group({filtrar:[""]}),this.isLoading=!0;const n=this.turnoService.getTurnos(),o=this.turnoService.getEspecialistas(),i=this.dataquery.getPacientes();(0,T.a)([n,o,i]).pipe((0,Z.U)(([r,p,I])=>r.map(g=>{const m=p.find(h=>h.uid===g.uidEspecialista),f=I.find(h=>h.uid===g.uidPaciente);return{...g,nombreEspecialista:m?`${m.apellido}, ${m.nombre}`:"Especialista no encontrado",nombrePaciente:f?`${f.apellido}, ${f.nombre}`:"Paciente no encontrado"}}))).subscribe(r=>{this.turnosDetallado=this.ordenarPorFecha(r),this.turnosFiltrado=this.turnosDetallado,this.isLoading=!1}),this.formSubscription=this.filtroForm.valueChanges.subscribe(r=>{this.turnosFiltrado=this.filtrarTurnos(this.turnosDetallado,r)})}ordenarPorFecha(n){return n.sort((o,i)=>{const r=this.convertirAFecha(o.fecha),p=this.convertirAFecha(i.fecha);return r.getTime()-p.getTime()}),n}convertirAFecha(n){const o=n.split("/");return new Date(parseInt(o[2]),parseInt(o[1])-1,parseInt(o[0]))}filtrarTurnos(n,o){return this.turnoService.filtrarTurnos(n,o)}verComentariosTurno(n){console.log(n);let o=`\n      <p><strong>Comentarios:</strong> ${n.comentarios}</p>\n      \n    `;n.datosFijos&&(""!==n.datosFijos.altura&&(o+=`\n          <p><strong>Altura:</strong> ${n.datosFijos.altura}</p>\n          `),""!==n.datosFijos.peso&&(o+=`\n          <p><strong>Peso:</strong> ${n.datosFijos.peso}</p>\n          `),""!==n.datosFijos.presion&&(o+=`\n          <p><strong>Presion:</strong> ${n.datosFijos.presion}</p>\n          `),""!==n.datosFijos.temperatura&&(o+=`\n          <p><strong>Temperatura:</strong> ${n.datosFijos.temperatura}</p>\n          `),""!==n.datosFijos.diagnostico&&(o+=`\n          <p><strong>Diagnostico:</strong> ${n.datosFijos.diagnostico}</p>\n          `)),n.datosDinamicos&&(""!==n.datosDinamicos.dato1.nombre&&(o+=`\n          <p><strong>${n.datosDinamicos.dato1.nombre}:</strong> ${n.datosDinamicos.dato1.valor}</p>\n          `),""!==n.datosDinamicos.dato2.nombre&&(o+=`\n          <p><strong>${n.datosDinamicos.dato2.nombre}:</strong> ${n.datosDinamicos.dato2.valor}</p>\n          `),""!==n.datosDinamicos.dato3.nombre&&(o+=`\n          <p><strong>${n.datosDinamicos.dato3.nombre}:</strong> ${n.datosDinamicos.dato3.valor}</p>\n          `)),""!==n.resenia&&(o+=`\n      <p><strong>Rese\xf1a:</strong> ${n.resenia}</p>\n      `),""!==n.calificacion&&(o+=`\n        <label for="calificacion">Calificaci\xf3n:</label>\n        <input type="range" id="calificacion" name="calificacion" min="1" max="5" value="${n.calificacion}" disabled>\n      `),c().fire({title:"Comentarios",html:o,confirmButtonText:"Cerrar",allowOutsideClick:()=>!c().isLoading()})}getColorPorEstado(n){switch(n){case"confirmado":return"badge rounded-pill text-bg-success";case"cancelado":case"rechazado":return"badge rounded-pill text-bg-danger";case"pendiente":return"badge rounded-pill text-bg-secondary";case"finalizado":return"badge rounded-pill text-bg-warning";default:return"badge rounded-pill text-bg-muted"}}cancelarTurno(n){var i,o=this;c().fire({title:"\xbfDesea cancelar?",input:"text",inputPlaceholder:"Ingrese el motivo de la cancelaci\xf3n",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"S\xed, cancelar",showLoaderOnConfirm:!0,preConfirm:(i=(0,x.Z)(function*(r){console.log(n.id,r),o.turnoService.cancelarTurno(n.id,r)}),function(p){return i.apply(this,arguments)}),allowOutsideClick:()=>!c().isLoading()}).then(i=>{i.isConfirmed&&c().fire("Cancelado","El turno fue cancelado.","success")})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(A.D),t.Y36(M.e),t.Y36(s.qu))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-turno-mostrar"]],decls:34,vars:4,consts:[["class","overlay",4,"ngIf"],[1,"turnos-container"],[3,"formGroup"],[1,"filtro-container"],[1,"buscar-container"],["for","filtrar",1,"buscar-label"],[1,"input-container"],["type","text","id","filtrar","formControlName","filtrar"],[1,"fa","fa-search"],["routerLink","turno/",1,"btn-danger","btn-sm","btn-nuevo-turno"],[1,"table","table-striped","align-middle","mb-0","bg-white"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"overlay"],[1,"spinner"],[1,"fw-normal","mb-1"],[3,"ngClass"],["type","button","class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-eye","text-muted",3,"click"]],template:function(o,i){1&o&&(t.YNc(0,P,2,0,"div",0),t.TgZ(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"Buscar:"),t.qZA(),t.TgZ(7,"div",6),t._UZ(8,"input",7)(9,"i",8),t.qZA(),t.TgZ(10,"button",9),t._uU(11,"Nuevo Turno"),t.qZA()()(),t.TgZ(12,"table",10)(13,"thead",11)(14,"tr")(15,"th"),t._uU(16,"Especialista"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Paciente"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Fecha"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Hora"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Especialidad"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Estado"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Accion"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Comentarios"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,U,23,15,"tr",12),t._UZ(33,"tr"),t.qZA()()()()),2&o&&(t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(1),t.Q6J("formGroup",i.filtroForm),t.xp6(30),t.Q6J("ngForOf",i.turnosFiltrado))},dependencies:[l.mk,l.sg,l.O5,u.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,F.n,y.k],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;align-items:center;justify-content:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid #e64141;border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.filtro-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:10px}.btn-nuevo-turno[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:60px;margin-top:5px}.turnos-container[_ngcontent-%COMP%]{margin:40px;padding:15px;border:2px solid transparent;border-radius:10px;box-shadow:0 0 10px 5px #0000004d}.buscar-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.input-container[_ngcontent-%COMP%]{position:relative}input[type=text][_ngcontent-%COMP%]{padding:8px 30px 8px 10px;border-radius:20px;box-shadow:2px 2px 4px #0003;border:none;outline:none;width:200px}.fa-search[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#888;font-size:16px}.buscar-label[_ngcontent-%COMP%]{font-size:18px;margin-right:10px;font-weight:700}"],data:{animation:[C.M]}})}return e})(),children:[]}];let _=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(j),u.Bz]})}return e})();var D=a(2514);let E=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[l.ez,_,s.UX,D.I]})}return e})()}}]);