"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[719],{1719:(B,_,s)=>{s.r(_),s.d(_,{PerfilPacienteModule:()=>M});var m=s(6814),P=s(2572),x=s(7398),y=s(9846),i=s(5879),C=s(9113),A=s(154),T=s(3194);function D(o,l){1&o&&(i.TgZ(0,"div",30),i._UZ(1,"div",31),i.qZA())}function E(o,l){if(1&o){const a=i.EpF();i.TgZ(0,"button",32),i.NdJ("click",function(){const d=i.CHM(a).$implicit,r=i.oxw();return i.KtG(r.historiaClinicaEspecialidad(d))}),i.qZA()}2&o&&i.Q6J("textContent",l.$implicit)}function F(o,l){if(1&o&&(i.ynx(0),i._uU(1),i._UZ(2,"br"),i.BQk()),2&o){const a=i.oxw(2).$implicit;i.xp6(1),i.AsE("",a.datosDinamicos.dato1.nombre,": ",a.datosDinamicos.dato1.valor,"")}}function S(o,l){if(1&o&&(i.ynx(0),i._uU(1),i._UZ(2,"br"),i.BQk()),2&o){const a=i.oxw(2).$implicit;i.xp6(1),i.AsE("",a.datosDinamicos.dato2.nombre,": ",a.datosDinamicos.dato2.valor,"")}}function j(o,l){if(1&o&&(i.ynx(0),i._uU(1),i._UZ(2,"br"),i.BQk()),2&o){const a=i.oxw(2).$implicit;i.xp6(1),i.AsE("",a.datosDinamicos.dato3.nombre,": ",a.datosDinamicos.dato3.valor,"")}}function H(o,l){if(1&o&&(i.ynx(0),i._uU(1),i._UZ(2,"br"),i._uU(3),i._UZ(4,"br"),i._uU(5),i._UZ(6,"br"),i._uU(7),i._UZ(8,"br"),i._uU(9),i._UZ(10,"br"),i._uU(11),i._UZ(12,"br"),i._uU(13),i._UZ(14,"br"),i._uU(15),i._UZ(16,"br"),i.YNc(17,F,3,2,"ng-container",33),i.YNc(18,S,3,2,"ng-container",33),i.YNc(19,j,3,2,"ng-container",33),i._UZ(20,"hr"),i.BQk()),2&o){const a=i.oxw().$implicit;i.xp6(1),i.AsE(" Fecha: ",a.fecha,", ",a.horaInicio,""),i.xp6(2),i.hij(" Especialista: ",a.nombreEspecialista,""),i.xp6(2),i.hij(" Comentarios: ",a.comentarios,""),i.xp6(2),i.hij(" Altura: ",a.datosFijos.altura,""),i.xp6(2),i.hij(" Peso: ",a.datosFijos.peso,""),i.xp6(2),i.hij(" Presion: ",a.datosFijos.presion,""),i.xp6(2),i.hij(" Temperatura: ",a.datosFijos.temperatura,""),i.xp6(2),i.hij(" Diagnostico: ",a.datosFijos.diagnostico,""),i.xp6(2),i.Q6J("ngIf",""!=a.datosDinamicos.dato1.nombre),i.xp6(1),i.Q6J("ngIf",""!=a.datosDinamicos.dato2.nombre),i.xp6(1),i.Q6J("ngIf",""!=a.datosDinamicos.dato3.nombre)}}function I(o,l){if(1&o&&(i.ynx(0),i.YNc(1,H,21,12,"ng-container",33),i.BQk()),2&o){const a=l.$implicit,e=i.oxw();i.xp6(1),i.Q6J("ngIf",a.especialidad.nombre===e.especialidadSeleccionada)}}let L=(()=>{class o{constructor(a,e){this.turnoService=a,this.authService=e,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.authService.getLoggedUser().subscribe(a=>{a&&this.authService.getUsuarioPorUid(a.uid).subscribe(e=>{this.usuario=e[0],this.isLoading=!1})})}filtrarPorEspecialidad(){this.isLoading=!0;const a=this.turnoService.getTurnos(),e=this.turnoService.getEspecialistas();(0,P.a)([a,e]).pipe((0,x.U)(([t,d])=>t.filter(r=>r.uidPaciente===this.usuario?.uid&&"finalizado"===r.estado).map(r=>{const u=d.find(f=>f.uid===r.uidEspecialista);return{...r,nombreEspecialista:u?`${u.apellido}, ${u.nombre}`:"Especialista no encontrado"}}))).subscribe(t=>{this.turnosDetallado=t,this.isLoading=!1,this.arrayEspecialidades=this.getEspecialidadesUnicas()})}getEspecialidadesUnicas(){const a=[];return this.turnosDetallado&&this.turnosDetallado.forEach(e=>{e&&e.especialidad&&e.especialidad.nombre&&!a.includes(e.especialidad.nombre)&&a.push(e.especialidad.nombre)}),a}historiaClinicaEspecialidad(a){this.especialidadSeleccionada=a}descargarPdf(){const a=new y.ZP,e=10;let t=e;const d=a.internal.pageSize.getHeight();a.addImage("assets/img/logo.png","PNG",a.internal.pageSize.getWidth()-50-10,10,50,50),a.text(this.usuario.nombre+", "+this.usuario.apellido+". Especialidad: "+this.especialidadSeleccionada,e,t);const h=new Date,$=h.getDate().toString().padStart(2,"0"),q=(h.getMonth()+1).toString().padStart(2,"0"),z=h.getFullYear();t+=10,a.text(`Fecha de emisi\xf3n: ${$}/${q}/${z}`,e,t);let b=!0;this.turnosDetallado.forEach((n,w)=>{if(n.especialidad.nombre===this.especialidadSeleccionada){const p=["-Fecha: "+n.fecha,"-Especialista: "+n.nombreEspecialista,"-Comentarios: "+n.comentarios,"-Datos: ","  -Altura: "+n.datosFijos.altura,"  -Peso: "+n.datosFijos.peso,"  -Presion: "+n.datosFijos.presion,"  -Temperatura: "+n.datosFijos.temperatura,"  -Diagnostico: "+n.datosFijos.diagnostico];""!==n.datosDinamicos.dato1.nombre.trim()&&p.push("-"+n.datosDinamicos.dato1.nombre+": "+n.datosDinamicos.dato1.valor),""!==n.datosDinamicos.dato2.nombre.trim()&&p.push("-"+n.datosDinamicos.dato2.nombre+": "+n.datosDinamicos.dato2.valor),""!==n.datosDinamicos.dato3.nombre.trim()&&p.push("-"+n.datosDinamicos.dato3.nombre+": "+n.datosDinamicos.dato3.valor);const g=10;!b&&t+g*p.length>d-e&&(a.addPage(),t=e),b&&(t+=2*g,b=!1),p.forEach(c=>{a.text(c,e,t),t+=g});const k=190,U=t+2;a.setLineWidth(.3),a.line(e,U,e+k,U),t+=g}}),a.save(this.usuario.nombre+"_"+this.usuario.apellido+"_HistoriaClinica_"+this.especialidadSeleccionada+".pdf")}static#i=this.\u0275fac=function(e){return new(e||o)(i.Y36(C.D),i.Y36(A.e))};static#a=this.\u0275cmp=i.Xpm({type:o,selectors:[["app-perfil-paciente"]],decls:81,vars:15,consts:[[1,"container","py-5"],["class","overlay",4,"ngIf"],[1,"row"],[1,"col-lg-4"],[1,"card","mb-4"],[1,"card-body","text-center"],["alt","imagenPerfil","appRedondearImagen","",2,"width","150px","height","150px",3,"src"],["alt","imagenPerfil",2,"width","150px","height","150px",3,"src"],[1,"my-3"],["type","button","data-bs-toggle","modal","data-bs-target","#filtroHistoriaClinica",1,"btn","btn-secondary",3,"click"],[1,"col-lg-8"],[1,"card-body"],[1,"col-sm-4"],[1,"mb-0"],[1,"col-sm-8"],[1,"text-muted","mb-0"],["id","filtroHistoriaClinica","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"d-grid","gap-2"],["type","button","class","btn btn-light","data-bs-dismiss","modal","data-bs-toggle","modal","data-bs-target","#HistoriaClinica",3,"textContent","click",4,"ngFor","ngForOf"],["id","HistoriaClinica","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModalLabels",1,"modal-title"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"overlay"],[1,"spinner"],["type","button","data-bs-dismiss","modal","data-bs-toggle","modal","data-bs-target","#HistoriaClinica",1,"btn","btn-light",3,"textContent","click"],[4,"ngIf"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,D,2,0,"div",1),i.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),i._UZ(6,"img",6)(7,"img",7),i.TgZ(8,"h5",8),i._uU(9),i.qZA(),i.TgZ(10,"button",9),i.NdJ("click",function(){return t.filtrarPorEspecialidad()}),i._uU(11," Historia cl\xednica "),i.qZA()()()(),i.TgZ(12,"div",10)(13,"div",4)(14,"div",11)(15,"div",2)(16,"div",12)(17,"p",13)(18,"strong"),i._uU(19,"Nombre y Apellido"),i.qZA()()(),i.TgZ(20,"div",14)(21,"p",15),i._uU(22),i.qZA()()(),i._UZ(23,"hr"),i.TgZ(24,"div",2)(25,"div",12)(26,"p",13)(27,"strong"),i._uU(28,"Email"),i.qZA()()(),i.TgZ(29,"div",14)(30,"p",15),i._uU(31),i.qZA()()(),i._UZ(32,"hr"),i.TgZ(33,"div",2)(34,"div",12)(35,"p",13)(36,"strong"),i._uU(37,"Fecha Nacimiento"),i.qZA()()(),i.TgZ(38,"div",14)(39,"p",15),i._uU(40),i.qZA()()(),i._UZ(41,"hr"),i.TgZ(42,"div",2)(43,"div",12)(44,"p",13)(45,"strong"),i._uU(46,"DNI"),i.qZA()()(),i.TgZ(47,"div",14)(48,"p",15),i._uU(49),i.qZA()()(),i._UZ(50,"hr"),i.TgZ(51,"div",2)(52,"div",12)(53,"p",13)(54,"strong"),i._uU(55,"Obra Social"),i.qZA()()(),i.TgZ(56,"div",14)(57,"p",15),i._uU(58),i.qZA()()()()()()(),i.TgZ(59,"div",16)(60,"div",17)(61,"div",18)(62,"div",19)(63,"h5",20),i._uU(64,"Historia cl\xednica"),i.qZA(),i._UZ(65,"button",21),i.qZA(),i.TgZ(66,"div",22)(67,"div",23),i.YNc(68,E,1,1,"button",24),i.qZA()()()()(),i.TgZ(69,"div",25)(70,"div",17)(71,"div",18)(72,"div",19)(73,"h5",26),i._uU(74),i.qZA(),i._UZ(75,"button",21),i.qZA(),i.TgZ(76,"div",22),i.YNc(77,I,2,1,"ng-container",27),i.qZA(),i.TgZ(78,"div",28)(79,"button",29),i.NdJ("click",function(){return t.descargarPdf()}),i._uU(80,"Descargar pdf"),i.qZA()()()()()()),2&e&&(i.xp6(1),i.Q6J("ngIf",t.isLoading),i.xp6(5),i.Q6J("src",null==t.usuario?null:t.usuario.imagen[0],i.LSH),i.xp6(1),i.Q6J("src",null==t.usuario?null:t.usuario.imagen[1],i.LSH),i.xp6(2),i.AsE("",null==t.usuario?null:t.usuario.nombre,", ",null==t.usuario?null:t.usuario.apellido,""),i.xp6(13),i.AsE("",null==t.usuario?null:t.usuario.nombre,", ",null==t.usuario?null:t.usuario.apellido,""),i.xp6(9),i.Oqu(null==t.usuario?null:t.usuario.mail),i.xp6(9),i.Oqu(null==t.usuario?null:t.usuario.fechaNacimiento),i.xp6(9),i.Oqu(null==t.usuario?null:t.usuario.dni),i.xp6(9),i.Oqu(null==t.usuario?null:t.usuario.obraSocial),i.xp6(10),i.Q6J("ngForOf",t.arrayEspecialidades),i.xp6(6),i.AsE("",null==t.usuario?null:t.usuario.nombre,", ",null==t.usuario?null:t.usuario.apellido,". Historia cl\xednica "),i.xp6(3),i.Q6J("ngForOf",t.turnosDetallado))},dependencies:[m.sg,m.O5,T.i],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;align-items:center;justify-content:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid #e64141;border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}return o})();var v=s(9517);const J=[{path:"",component:L,children:[]}];let N=(()=>{class o{static#i=this.\u0275fac=function(e){return new(e||o)};static#a=this.\u0275mod=i.oAB({type:o});static#t=this.\u0275inj=i.cJS({imports:[m.ez,v.Bz.forChild(J),v.Bz]})}return o})();var O=s(6223),Q=s(2514);let M=(()=>{class o{static#i=this.\u0275fac=function(e){return new(e||o)};static#a=this.\u0275mod=i.oAB({type:o});static#t=this.\u0275inj=i.cJS({imports:[m.ez,N,O.u5,Q.I]})}return o})()}}]);