"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[705],{4705:(E,f,l)=>{l.r(f),l.d(f,{TurnoPacienteModule:()=>Z});var d=l(6814),h=l(969),e=l(5879),r=l(5349);let T=(()=>{class t{constructor(s){this.firestore=s}getEspecialidades(){const s=(0,r.hJ)(this.firestore,"especialidades");return(0,r.BS)(s)}getEspecialistas(){const s=(0,r.hJ)(this.firestore,"usuarios"),n=(0,r.IO)(s,(0,r.ar)("perfil","==","especialista"),(0,r.ar)("estado","==",!0));return(0,r.BS)(n)}static#e=this.\u0275fac=function(n){return new(n||t)(e.LFG(r.gg))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var u=l(95);function v(t,p){if(1&t&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&t){const s=p.$implicit;e.xp6(1),e.Oqu(s.nombre)}}function _(t,p){if(1&t){const s=e.EpF();e.ynx(0),e.TgZ(1,"h3"),e._uU(2),e.qZA(),e.ynx(3),e.TgZ(4,"button",5),e.NdJ("click",function(){const a=e.CHM(s).$implicit,i=e.oxw(2);return e.KtG(i.mostrarTurnos(a.horaInicio,a.horaFin,a))}),e._uU(5,"Apreta aca"),e.qZA(),e.BQk()()}if(2&t){const s=p.$implicit;e.xp6(2),e.hij("",s.apellido," - Horario de Atenci\xf3n")}}function C(t,p){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,_,6,1,"ng-container",4),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.especialistas)}}const S=[{path:"",component:(()=>{class t{constructor(s){this.turnoServices=s,this.turnos=[]}ngOnInit(){this.turnoServices.getEspecialidades().subscribe(s=>{this.especilidades=s,console.log(this.especilidades)})}buscarPorEspecialidad(){this.turnoServices.getEspecialistas().subscribe(s=>{this.especialistas=[];const n=s;for(let o=0;o<n.length;o++){const i=n[o].especialidad;for(let c=0;c<i.length;c++)i[c]==this.especialidadSeleccionada&&this.especialistas.push(n[o])}console.log(this.especialistas)})}mostrarTurnos(s,n,o){let a=new Date(Date.now());a.setHours(0,0,0,0),a.setDate(a.getDate()+1);let i=new Date(a);i.setHours(parseInt(s.split(":")[0]),parseInt(s.split(":")[1]));let c=new Date(a);c.setHours(parseInt(n.split(":")[0]),parseInt(n.split(":")[1]));for(let m=0;m<3;m++){for(;i<c;){const g=new Date(i);console.log(`${g.toLocaleDateString("es-ES",{weekday:"long"})} ${g.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})} hora inicial, ${c.toLocaleDateString("es-ES",{weekday:"long"})} ${c.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})} hora final`),this.turnos.push(g,o),i.setMinutes(i.getMinutes()+30)}i.setDate(i.getDate()+1),i.setHours(0,0,0,0),c.setDate(c.getDate()+1),c.setHours(0,0,0,0),i.setHours(parseInt(s.split(":")[0]),parseInt(s.split(":")[1])),c.setHours(parseInt(n.split(":")[0]),parseInt(n.split(":")[1]))}console.log(this.turnos,"Etos son los turnos que agendo")}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(T))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-turno-paciente"]],decls:9,vars:3,consts:[[1,"container"],[1,"especialidad"],["for","specialty"],["id","specialty",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"click"],["class","contenedor",4,"ngIf"],[1,"contenedor"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3,"Especialidades"),e.qZA(),e.TgZ(4,"select",3),e.NdJ("ngModelChange",function(i){return o.especialidadSeleccionada=i}),e.YNc(5,v,2,1,"option",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.buscarPorEspecialidad()}),e._uU(7,"Buscar Turno"),e.qZA()(),e.YNc(8,C,2,1,"div",6),e.qZA()),2&n&&(e.xp6(4),e.Q6J("ngModel",o.especialidadSeleccionada),e.xp6(1),e.Q6J("ngForOf",o.especilidades),e.xp6(3),e.Q6J("ngIf",null!=o.especialistas))},dependencies:[d.sg,d.O5,u.YN,u.Kr,u.EJ,u.JJ,u.On]})}return t})(),children:[]}];let b=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#s=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(S),h.Bz]})}return t})(),Z=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#s=this.\u0275inj=e.cJS({imports:[d.ez,b,u.u5]})}return t})()}}]);