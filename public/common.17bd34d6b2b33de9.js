"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[592],{9113:(v,_,d)=>{d.d(_,{D:()=>p});var s=d(5861),e=d(5349),h=d(5879);let p=(()=>{class f{constructor(r){this.firestore=r}getEspecialidades(){const r=(0,e.hJ)(this.firestore,"especialidades");return(0,e.BS)(r)}getEspecialistas(){const r=(0,e.hJ)(this.firestore,"usuarios"),t=(0,e.IO)(r,(0,e.ar)("perfil","==","especialista"),(0,e.ar)("estado","==",!0));return(0,e.BS)(t)}getPacientes(){const r=(0,e.hJ)(this.firestore,"usuarios"),t=(0,e.IO)(r,(0,e.ar)("perfil","==","paciente"),(0,e.ar)("estado","==",!0));return(0,e.BS)(t)}getTurnos(){const r=(0,e.hJ)(this.firestore,"turnos");return(0,e.BS)(r)}crearTurno(r){var t=this;return(0,s.Z)(function*(){const n=yield t.getProxIdTurno(),o=(0,e.hJ)(t.firestore,"turnos");(0,e.ET)(o,{id:n,uidPaciente:r.uidPaciente,uidEspecialista:r.uidEspecialista,estado:r.estado,fecha:r.fecha,horaFin:r.horaFin,horaInicio:r.horaInicio,comentarios:r.comentarios,calificacion:r.calificacion,especialidad:r.especialidad,resenia:""})})()}getProxIdTurno(){var r=this;return(0,s.Z)(function*(){const t=(0,e.hJ)(r.firestore,"turnos"),n=(0,e.IO)(t,(0,e.Xo)("id","desc")),o=yield(0,e.PL)(n);return o.empty?1:o.docs[0].get("id")+1})()}cancelarTurno(r,t){var n=this;return(0,s.Z)(function*(){const o=(0,e.hJ)(n.firestore,"turnos"),a=(0,e.IO)(o,(0,e.ar)("id","==",r)),i=yield(0,e.PL)(a);return 0!==i.size&&(i.forEach(function(){var c=(0,s.Z)(function*(u){const l=u.ref;yield(0,e.pl)(l,{estado:"cancelado",comentarios:t},{merge:!0})});return function(u){return c.apply(this,arguments)}}()),!0)})()}finalizarTurno(r,t){var n=this;return(0,s.Z)(function*(){const o=(0,e.hJ)(n.firestore,"turnos"),a=(0,e.IO)(o,(0,e.ar)("id","==",r)),i=yield(0,e.PL)(a);return 0!==i.size&&(i.forEach(function(){var c=(0,s.Z)(function*(u){const l=u.ref;yield(0,e.pl)(l,{estado:"finalizado",comentarios:t},{merge:!0})});return function(u){return c.apply(this,arguments)}}()),!0)})()}confirmarTurno(r){var t=this;return(0,s.Z)(function*(){const n=(0,e.hJ)(t.firestore,"turnos"),o=(0,e.IO)(n,(0,e.ar)("id","==",r)),a=yield(0,e.PL)(o);return 0!==a.size&&(a.forEach(function(){var i=(0,s.Z)(function*(c){const u=c.ref;yield(0,e.pl)(u,{estado:"confirmado"},{merge:!0})});return function(c){return i.apply(this,arguments)}}()),!0)})()}calificarTurno(r,t,n){var o=this;return(0,s.Z)(function*(){const a=(0,e.hJ)(o.firestore,"turnos"),i=(0,e.IO)(a,(0,e.ar)("id","==",r)),c=yield(0,e.PL)(i);return 0!==c.size&&(c.forEach(function(){var u=(0,s.Z)(function*(l){const m=l.ref;yield(0,e.pl)(m,{resenia:t,calificacion:n},{merge:!0})});return function(l){return u.apply(this,arguments)}}()),!0)})()}static#e=this.\u0275fac=function(t){return new(t||f)(h.LFG(e.gg))};static#r=this.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()}}]);